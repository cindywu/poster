.post-editor {
  counter-reset: math-block;
}

math {
  .katex-editor .ProseMirror {
    font-family: monospace;
    color: purple;
  }
}

math.math-block {
  .katex-render {
    text-align: center;
  }

  .katex-render::after {
    counter-increment: math-block;
    content: "( " counter(math-block) " )";
    padding-left: 100px;
    position: absolute;
    right: 1rem;
  }

  .katex-editor .ProseMirror {
    background: $grayLightest;
  }
}

math.math-block.ProseMirror-selectednode {
  .katex-editor {
    background: $grayLightest;
  }

  .katex-editor::before,
  .katex-editor::after {
    content: "$$";
    color: $grayLighter;
  }
}

math.math-inline > * {
  display: inline;
}

math.math-inline {
  display: inline-block;
  width: auto;
  white-space: normal;
  position: relative;

  .ProseMirror {
    display: inline;
    font-size: inherit;
    padding: 0em;
  }
}

math.math-inline.ProseMirror-selectednode {
  .katex-render {
    span {
      color: white;
    }
    cursor: auto;
    position: absolute;
    top: calc(100% + 10px);
    background: $grayDark;
    padding: 4px 8px;
    border-radius: 2px;
    z-index: 1;
    white-space: nowrap;
    left: 8px;
  }

  .katex-render::before {
    border: 5px solid $grayDark;
    border-top-width: 0px;
    border-left-color: transparent;
    border-right-color: transparent;
    position: absolute;
    top: -5px;
    left: 4px;
    content: " ";
    height: 0;
    width: 0;
  }

  .katex-editor::before,
  .katex-editor::after {
    content: "$";
    color: $grayLighter;
  }
}
